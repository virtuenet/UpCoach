# PRODUCTION ENVIRONMENT TEMPLATE
# Generated: 2025-10-16
#
# SECURITY NOTICE: This template uses environment variable substitution for all secrets.
# Set these environment variables in your deployment environment (Kubernetes secrets, etc.)

# Server Configuration
PORT=8080
NODE_ENV=production

# Database Configuration - Use Environment Variables
DATABASE_URL=${DATABASE_URL}
DB_HOST=${DB_HOST:-localhost}
DB_PORT=${DB_PORT:-8004}
DB_USER=${DB_USER}
DB_PASSWORD=${DB_PASSWORD}
DB_NAME=${DB_NAME:-upcoach_db}
DB_SSL=true
DB_SSL_REJECT_UNAUTHORIZED=true

# JWT Configuration - Use Strong Secrets from Environment
JWT_SECRET=${JWT_SECRET}
JWT_EXPIRES_IN=15m
JWT_REFRESH_SECRET=${JWT_REFRESH_SECRET}
JWT_REFRESH_EXPIRES_IN=7d

# Session Security
SESSION_SECRET=${SESSION_SECRET}
COOKIE_SECRET=${COOKIE_SECRET}
COOKIE_SECURE=true
COOKIE_HTTP_ONLY=true
COOKIE_SAME_SITE=strict

# Supabase Configuration
SUPABASE_URL=${SUPABASE_URL}
SUPABASE_ANON_KEY=${SUPABASE_ANON_KEY}
SUPABASE_SERVICE_ROLE_KEY=${SUPABASE_SERVICE_ROLE_KEY}

# Redis Configuration
REDIS_URL=${REDIS_URL}
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_TLS=true

# Security Headers Configuration
CSP_ENABLED=true
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000
X_FRAME_OPTIONS=DENY
X_CONTENT_TYPE_OPTIONS=nosniff
REFERRER_POLICY=strict-origin-when-cross-origin

# CORS Configuration - RESTRICTIVE
CORS_ORIGIN=https://upcoach.ai,https://www.upcoach.ai,https://admin.upcoach.ai
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With

# Rate Limiting - AGGRESSIVE
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_MAX_REQUESTS_AUTH=5
RATE_LIMIT_MAX_REQUESTS_SIGNUP=3
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# Backup Security
BACKUP_ENCRYPTION_KEY=${BACKUP_ENCRYPTION_KEY}
BACKUP_ENCRYPTION_ALGORITHM=aes-256-gcm

# Logging and Monitoring Security
LOG_LEVEL=info
LOG_SQL_QUERIES=false
LOG_SENSITIVE_DATA=false
AUDIT_LOG_ENABLED=true

# API Security
API_TIMEOUT=30000
API_MAX_PAYLOAD_SIZE=10mb
API_JSON_LIMIT=1mb

# File Upload Security
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=jpg,jpeg,png,webp,pdf
FILE_VIRUS_SCAN_ENABLED=true

# Feature Flags - Security First
FEATURE_DEBUG_MODE=false
FEATURE_STACK_TRACES=false
FEATURE_DETAILED_ERRORS=false

# External Service Configuration - Environment Variables Required
GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID}
GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET}
GOOGLE_REDIRECT_URI=${GOOGLE_REDIRECT_URI}

OPENAI_API_KEY=${OPENAI_API_KEY}
REVENUECAT_API_KEY=${REVENUECAT_API_KEY}

# Site Configuration
SITE_URL=${SITE_URL:-https://upcoach.ai}
ALLOWED_URLS=${ALLOWED_URLS}
API_URL=${API_URL:-https://api.upcoach.ai}

# Admin Configuration
PGADMIN_EMAIL=${PGADMIN_EMAIL}
PGADMIN_PASSWORD=${PGADMIN_PASSWORD}

# Email Configuration
SMTP_HOST=${SMTP_HOST}
SMTP_PORT=${SMTP_PORT:-587}
SMTP_SECURE=true
SMTP_USER=${SMTP_USER}
SMTP_PASS=${SMTP_PASS}
SMTP_FROM=${SMTP_FROM}

# Google Cloud Configuration
GOOGLE_APPLICATION_CREDENTIALS=${GOOGLE_APPLICATION_CREDENTIALS}

# Monitoring Configuration
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Analytics Configuration
NEXT_PUBLIC_GA_ID=${NEXT_PUBLIC_GA_ID}
MIXPANEL_TOKEN=${MIXPANEL_TOKEN}

# Clerk Authentication Configuration
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=${NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY}
CLERK_SECRET_KEY=${CLERK_SECRET_KEY}

# Database Security Configurations
DB_CONNECTION_TIMEOUT=30000
DB_IDLE_TIMEOUT=10000
DB_QUERY_TIMEOUT=30000
DB_STATEMENT_TIMEOUT=60000
DB_MAX_CONNECTIONS=20
DB_MIN_CONNECTIONS=5

# Webhook Security
WEBHOOK_SIGNATURE_VERIFICATION=true
WEBHOOK_TIMEOUT=5000
WEBHOOK_RETRY_ATTEMPTS=3

# Security Scanning
DEPENDENCY_SCAN_ENABLED=true
VULNERABILITY_SCAN_ENABLED=true
SECURITY_HEADERS_SCAN_ENABLED=true

# DEPLOYMENT NOTES:
# 1. Generate strong secrets for JWT_SECRET, JWT_REFRESH_SECRET, SESSION_SECRET, COOKIE_SECRET
# 2. Use a secrets management system like Kubernetes secrets, Azure Key Vault, or AWS Secrets Manager
# 3. Rotate all secrets regularly (quarterly for production)
# 4. Never commit actual secret values to version control
# 5. Use different secrets for each environment (dev, staging, production)