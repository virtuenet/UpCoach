# UpCoach Production Environment - SECURED
# This file contains the secure production configuration
# All secrets should be managed through a secure secrets management system

NODE_ENV=production

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# Use connection string from secrets manager or environment variable
DATABASE_URL="${DATABASE_URL}"
DB_HOST="${DB_HOST:-localhost}"
DB_PORT="${DB_PORT:-5432}"
DB_NAME="${DB_NAME:-upcoach_prod}"
DB_USER="${DB_USER}"
DB_PASSWORD="${DB_PASSWORD}"
DB_SSL=true
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_CONNECTION_TIMEOUT=60000

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_URL="${REDIS_URL:-redis://redis:6379}"
REDIS_PASSWORD="${REDIS_PASSWORD}"
REDIS_DB=0
REDIS_KEY_PREFIX=upcoach:
REDIS_ENABLE_TLS=true
REDIS_CLUSTER_MODE=false

# =============================================================================
# JWT CONFIGURATION (Secrets from secure store)
# =============================================================================
JWT_SECRET="${JWT_SECRET}"
JWT_REFRESH_SECRET="${JWT_REFRESH_SECRET}"
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
JWT_ALGORITHM=HS512
JWT_AUDIENCE=upcoach-api
JWT_ISSUER=upcoach.ai

# =============================================================================
# SESSION CONFIGURATION
# =============================================================================
SESSION_SECRET="${SESSION_SECRET}"
SESSION_NAME=upcoach.sid
SESSION_MAX_AGE=86400000
USE_REDIS_SESSIONS=true
SESSION_CLEANUP_INTERVAL=3600000

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
CSRF_SECRET="${CSRF_SECRET}"
ENCRYPTION_KEY="${ENCRYPTION_KEY}"
API_KEY_SALT="${API_KEY_SALT}"
FINGERPRINT_SECRET="${FINGERPRINT_SECRET}"
WEBHOOK_SECRET="${WEBHOOK_SECRET}"

# Password Policy
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL=true
PASSWORD_HISTORY_COUNT=5
PASSWORD_EXPIRY_DAYS=90

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
CORS_ORIGINS=https://upcoach.ai,https://api.upcoach.ai,https://admin.upcoach.ai,https://cms.upcoach.ai
CORS_ALLOW_SUBDOMAINS=true
MAIN_DOMAIN=upcoach.ai

# =============================================================================
# API CONFIGURATION
# =============================================================================
API_URL=https://api.upcoach.ai
PORT=8080
CLUSTER_MODE=true
WORKER_COUNT=4

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_TRUST_PROXY=true

# =============================================================================
# FRONTEND URLS
# =============================================================================
ADMIN_PANEL_URL=https://admin.upcoach.ai
LANDING_PAGE_URL=https://upcoach.ai
CMS_PANEL_URL=https://cms.upcoach.ai

# =============================================================================
# AUTHENTICATION PROVIDERS
# =============================================================================
# OAuth Providers
GOOGLE_CLIENT_ID="${GOOGLE_CLIENT_ID}"
GOOGLE_CLIENT_SECRET="${GOOGLE_CLIENT_SECRET}"
FACEBOOK_CLIENT_ID="${FACEBOOK_CLIENT_ID}"
FACEBOOK_CLIENT_SECRET="${FACEBOOK_CLIENT_SECRET}"
GITHUB_CLIENT_ID="${GITHUB_CLIENT_ID}"
GITHUB_CLIENT_SECRET="${GITHUB_CLIENT_SECRET}"

# Clerk Authentication
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY="${NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY}"
CLERK_SECRET_KEY="${CLERK_SECRET_KEY}"
CLERK_WEBHOOK_SECRET="${CLERK_WEBHOOK_SECRET}"

# =============================================================================
# AI SERVICES
# =============================================================================
OPENAI_API_KEY="${OPENAI_API_KEY}"
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.7

CLAUDE_API_KEY="${CLAUDE_API_KEY}"
CLAUDE_MODEL=claude-3-opus
CLAUDE_MAX_TOKENS=2000

# =============================================================================
# PAYMENT PROCESSING
# =============================================================================
STRIPE_SECRET_KEY="${STRIPE_SECRET_KEY}"
STRIPE_WEBHOOK_SECRET="${STRIPE_WEBHOOK_SECRET}"
STRIPE_PUBLISHABLE_KEY="${STRIPE_PUBLISHABLE_KEY}"

# =============================================================================
# EMAIL SERVICE
# =============================================================================
EMAIL_PROVIDER=sendgrid
SENDGRID_API_KEY="${SENDGRID_API_KEY}"
EMAIL_FROM=noreply@upcoach.ai
EMAIL_REPLY_TO=support@upcoach.ai

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================
STORAGE_PROVIDER=s3
AWS_ACCESS_KEY_ID="${AWS_ACCESS_KEY_ID}"
AWS_SECRET_ACCESS_KEY="${AWS_SECRET_ACCESS_KEY}"
AWS_REGION=us-east-1
S3_BUCKET=upcoach-prod-assets
S3_CDN_URL=https://cdn.upcoach.ai

# =============================================================================
# MONITORING & LOGGING
# =============================================================================
# Sentry
SENTRY_DSN="${SENTRY_DSN}"
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

# DataDog
DATADOG_API_KEY="${DATADOG_API_KEY}"
DATADOG_APP_KEY="${DATADOG_APP_KEY}"
DATADOG_SITE=datadoghq.com
DD_ENV=production
DD_SERVICE=upcoach-api
DD_VERSION=1.0.0
DD_LOGS_INJECTION=true
DD_TRACE_ENABLED=true
DD_PROFILING_ENABLED=true

# Logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_TO_FILE=true
LOG_FILE_PATH=/var/log/upcoach/api.log
LOG_MAX_SIZE=100M
LOG_MAX_FILES=10
LOG_COMPRESSION=true

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_AI_COACHING=true
ENABLE_VOICE_AI=true
ENABLE_PREDICTIVE_ANALYTICS=true
ENABLE_ADAPTIVE_LEARNING=true
ENABLE_MULTI_LANGUAGE=true
ENABLE_WEBHOOKS=true
ENABLE_API_VERSIONING=true

# =============================================================================
# SECURITY FEATURES
# =============================================================================
ENABLE_2FA=true
ENABLE_IP_WHITELISTING=false
ENABLE_API_KEY_AUTH=true
ENABLE_AUDIT_LOGGING=true
ENABLE_ENCRYPTION_AT_REST=true
ENABLE_WAF=true
ENABLE_DDOS_PROTECTION=true

# Security Headers
ENABLE_HSTS=true
HSTS_MAX_AGE=31536000
ENABLE_CSP=true
ENABLE_XSS_PROTECTION=true
ENABLE_NOSNIFF=true
ENABLE_FRAME_OPTIONS=true

# =============================================================================
# BACKUP & DISASTER RECOVERY
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=upcoach-backups
BACKUP_ENCRYPTION=true

# =============================================================================
# COMPLIANCE
# =============================================================================
GDPR_ENABLED=true
GDPR_DATA_RETENTION_DAYS=365
GDPR_ANONYMIZATION_ENABLED=true
CCPA_ENABLED=true
HIPAA_COMPLIANT=false

# =============================================================================
# PERFORMANCE
# =============================================================================
CACHE_ENABLED=true
CACHE_TTL=3600
CDN_ENABLED=true
CDN_URL=https://cdn.upcoach.ai
COMPRESSION_ENABLED=true
MINIFICATION_ENABLED=true

# =============================================================================
# MAINTENANCE
# =============================================================================
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="System maintenance in progress. Please try again later."
MAINTENANCE_ALLOWED_IPS=""

# =============================================================================
# MISCELLANEOUS
# =============================================================================
TIMEZONE=UTC
DEFAULT_LANGUAGE=en
SUPPORTED_LANGUAGES=en,es,fr,de,pt,it,nl,ru,zh,ja
MAX_UPLOAD_SIZE=50MB
PAGINATION_DEFAULT_LIMIT=20
PAGINATION_MAX_LIMIT=100